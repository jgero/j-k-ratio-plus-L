<!DOCTYPE html>
<html>
	<head>
		<title>Kotlin to Java compression calculator</title>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	</head>
    <style>
        body {
            display: flex;
            flex-direction: row;
        }
        #container {
            height: 80vh;
        }
        .left, #java {
            flex: 5;
        }
        .center {
            flex: 1;
        }
    </style>
	<body>
        <div class="left">
		    <div id="container"></div>
        </div>
        <div class="center">
            <button type="button" onclick="onButton()">compile</button>
        </div>
        <div id="java">
            
        </div>
		<!-- OR ANY OTHER AMD LOADER HERE INSTEAD OF loader.js -->
		<script src="./static/monaco-editor/min/vs/loader.js"></script>
		<script>
			require.config({ paths: { vs: './static/monaco-editor/min/vs' } });

			require(['vs/editor/editor.main'], function () {
				window.editor = monaco.editor.create(document.getElementById('container'), {
                    value: ['fun main() {', '\tprint("Hello world!")', '}'].join('\n'),
					language: 'kotlin',
                    theme: "vs-dark"
				});
			});

            function onButton() {
                fetch("compile", {
                    method: "POST",
                    headers: new Headers([["Content-Type", "application/json"]]),
                    body: JSON.stringify({ src: window.editor.getValue() })
                }).then((response) => response.json())
                    .then((body) => {
                        document.getElementById("java").textContent = body.src;
                    });
            }
		</script>
	</body>
</html>
